# config.py ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –≤—ã–Ω–µ—Å–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ main.py

import os
import sys
from dotenv import load_dotenv

# -----------------------
# === –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è / .env ===
# -----------------------
ENV_PATH = ".env"
if not os.path.exists(ENV_PATH):
    with open(ENV_PATH, "w", encoding="utf-8") as f:
        f.write("API_ID=11986433\n")
        f.write("API_HASH=17af9a3324d57bfb85f0a7ac8b98a60d\n")

load_dotenv(ENV_PATH)
try:
    API_ID = int(os.getenv("API_ID"))
except Exception:
    API_ID = None
API_HASH = os.getenv("API_HASH")

# -----------------------
# === BOT_TOKEN: .env -> argv fallback ===
# -----------------------
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∏–∑ .env (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è BOT_TOKEN). –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è docker/docker-compose.
BOT_TOKEN = os.getenv("BOT_TOKEN")
if not BOT_TOKEN:
    # –µ—Å–ª–∏ –≤ .env –Ω–µ—Ç ‚Äî –æ–∂–∏–¥–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç (–æ–±—Ä–∞—Ç–Ω–æ-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ Windows)
    if len(sys.argv) < 2:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python main.py <BOT_TOKEN> –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ BOT_TOKEN –≤ .env")
        sys.exit(1)
    BOT_TOKEN = sys.argv[1]

# -----------------------
# === –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º ===
# -----------------------
USERS_FILE = "./users_data/users.enc"
KEY_FILE = "./users_data/secret.key"
SESSIONS_DIR = "./users_data/sessions"
LOG_DIR = "./users_data/logs"

# -----------------------
# === –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –ø–∞–º—è—Ç–∏ ===
# -----------------------
# –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
GLOBAL_APP = None

# TTL —Å–µ—Å—Å–∏–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
SESSION_TTL_SECONDS = 15 * 60  # 15 –º–∏–Ω—É—Ç

# -----------------------
# === –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ===
# -----------------------
# —Å–ª–æ–≤–∞—Ä—å —Ç–µ–∫—É—â–∏—Ö flow –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
pending_action = {}  # —Å–ª–æ–≤–∞—Ä—å —Ç–µ–∫—É—â–∏—Ö flow –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# active_sessions: map session_key -> {"created": ts, "expiry": ts, "owner": user_id}
active_sessions = {}

# -----------------------
# === –ú–µ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫ / UI ===
# -----------------------
LABEL_ADD_ADMIN = "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
LABEL_ADD_OPERATOR = "‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"
LABEL_REMOVE_OPERATOR = "‚ûñ –£–¥–∞–ª–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"
LABEL_LIST_OPERATORS = "üìã –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤"
LABEL_SCAN = "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
LABEL_CANCEL = "–û—Ç–º–µ–Ω–∞"

WARNING_TEXT = "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ Telegram –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ. –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —ç—Ç–æ –Ω–∞ —Å–≤–æ–π —Ä–∏—Å–∫."
